!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@angular/material/select"),require("@angular/material/datepicker"),require("@angular/material/checkbox"),require("rxjs"),require("@angular/material/autocomplete"),require("@angular/common/http"),require("rxjs/operators"),require("jsonata"),require("@angular/forms"),require("@angular/material/dialog"),require("@angular/cdk/drag-drop"),require("@angular/cdk/keycodes"),require("@angular/common"),require("@angular/material/expansion"),require("@angular/flex-layout/extended"),require("@angular/material/tooltip"),require("@angular/material/icon"),require("@angular/material/menu"),require("@angular/flex-layout/flex"),require("@angular/material/button"),require("@angular/material/form-field"),require("@angular/material/input"),require("@angular/material/tabs"),require("@angular/material/chips"),require("@angular/material/core"),require("@angular/material/card"),require("@angular/flex-layout"),require("@angular/material/table")):"function"==typeof define&&define.amd?define("@dashjoin/json-schema-form",["exports","@angular/core","@angular/material/select","@angular/material/datepicker","@angular/material/checkbox","rxjs","@angular/material/autocomplete","@angular/common/http","rxjs/operators","jsonata","@angular/forms","@angular/material/dialog","@angular/cdk/drag-drop","@angular/cdk/keycodes","@angular/common","@angular/material/expansion","@angular/flex-layout/extended","@angular/material/tooltip","@angular/material/icon","@angular/material/menu","@angular/flex-layout/flex","@angular/material/button","@angular/material/form-field","@angular/material/input","@angular/material/tabs","@angular/material/chips","@angular/material/core","@angular/material/card","@angular/flex-layout","@angular/material/table"],t):t(((e="undefined"!=typeof globalThis?globalThis:e||self).dashjoin=e.dashjoin||{},e.dashjoin["json-schema-form"]={}),e.ng.core,e.ng.material.select,e.ng.material.datepicker,e.ng.material.checkbox,e.rxjs,e.ng.material.autocomplete,e.ng.common.http,e.rxjs.operators,e.jsonata,e.ng.forms,e.ng.material.dialog,e.ng.cdk.dragDrop,e.ng.cdk.keycodes,e.ng.common,e.ng.material.expansion,e.ng.flexLayout.extended,e.ng.material.tooltip,e.ng.material.icon,e.ng.material.menu,e.ng.flexLayout.flex,e.ng.material.button,e.ng.material.formField,e.ng.material.input,e.ng.material.tabs,e.ng.material.chips,e.ng.material.core,e.ng.material.card,e.ng.flexLayout,e.ng.material.table)}(this,(function(e,t,a,n,r,i,o,l,s,c,u,m,p,h,d,f,v,y,g,x,C,b,S,w,M,E,I,O,V,k){"use strict";function F(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var T=F(c),D=function(){function e(){this.editMode=!1,this.formats={email:/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,ipv4:/^(?!0)(?!.*\.$)((1?\d?\d|25[0-5]|2[0-4]\d)(\.|$)){4}$/,url:/^https?:\/\/(www\.)?[-a-zA-Z0-9@:%._\+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b([-a-zA-Z0-9()@:%_\+.~#?&//=]*)$/,uri:/^\w+:(\/?\/?)[^\s]+$/},this.registry={},this.displayWithRegistry={}}return e.prototype.registerComponent=function(e,t){this.registry[e]=t},e.prototype.registerDisplayWith=function(e,t){this.displayWithRegistry[e]=t},e}();D.ɵfac=function(e){return new(e||D)},D.ɵprov=t.ɵɵdefineInjectable({token:D,factory:D.ɵfac,providedIn:"root"}),("undefined"==typeof ngDevMode||ngDevMode)&&t.ɵsetClassMetadata(D,[{type:t.Injectable,args:[{providedIn:"root"}]}],null,null);Object.create;function j(e){var t="function"==typeof Symbol&&Symbol.iterator,a=t&&e[t],n=0;if(a)return a.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function A(e,t){var a="function"==typeof Symbol&&e[Symbol.iterator];if(!a)return e;var n,r,i=a.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)o.push(n.value)}catch(e){r={error:e}}finally{try{n&&!n.done&&(a=i.return)&&a.call(i)}finally{if(r)throw r.error}}return o}Object.create;var L=function(e){this.viewContainerRef=e};L.ɵfac=function(e){return new(e||L)(t.ɵɵdirectiveInject(t.ViewContainerRef))},L.ɵdir=t.ɵɵdefineDirective({type:L,selectors:[["","libWidgetHost",""]]}),("undefined"==typeof ngDevMode||ngDevMode)&&t.ɵsetClassMetadata(L,[{type:t.Directive,args:[{selector:"[libWidgetHost]"}]}],(function(){return[{type:t.ViewContainerRef}]}),null);var q=function(){function e(){}return e.jsonPointer=function(t,a){return e.jsonPointer2(t,e.split(a))},e.jsonPointer2=function(e,t){var a,n;if(void 0!==e){if(0===t.length)return e;var r=t[0],i=Object.assign([],t);if(i.splice(0,1),"*"===t[0]){var o=[];try{for(var l=j("object"==typeof e?Object.values(e):e),s=l.next();!s.done;s=l.next()){var c=s.value;o.push(this.jsonPointer2(c,i))}}catch(e){a={error:e}}finally{try{s&&!s.done&&(n=l.return)&&n.call(l)}finally{if(a)throw a.error}}return o}return this.jsonPointer2(e[r],i)}},e.split=function(e){var t,a;if(""===e)return[];if(e.startsWith("/")){var n=(e=e.substring(1)).split("/");try{for(var r=j(n),i=r.next();!i.done;i=r.next()){if(""===i.value)throw new Error("JSON Pointer must not contain an empty reference token")}}catch(e){t={error:e}}finally{try{i&&!i.done&&(a=r.return)&&a.call(r)}finally{if(t)throw t.error}}return n}throw new Error("JSON Pointer must start with /")},e}(),P=function(){function e(e){this.http=e}return e.prototype.load=function(e,t){var a,n,r=this;if(!this.cache)if(t.choices){var o=[];try{for(var l=j(t.choices),c=l.next();!c.done;c=l.next()){var u=c.value;o.push(this.choice(u,t))}}catch(e){a={error:e}}finally{try{c&&!c.done&&(n=l.return)&&n.call(l)}finally{if(a)throw a.error}}this.cache=i.forkJoin(o)}else this.cache=this.getChoices(t.choicesUrl,t.choicesUrlArgs,t.choicesVerb).pipe(s.switchMap((function(e){var a,n;t.jsonata&&(e=T.default(t.jsonata).evaluate(e),Array.isArray(e)||(e=[e]));var o=[];try{for(var l=j(e),s=l.next();!s.done;s=l.next()){var c=s.value;o.push(r.choice(c,t))}}catch(e){a={error:e}}finally{try{s&&!s.done&&(n=l.return)&&n.call(l)}finally{if(a)throw a.error}}return i.forkJoin(o)})),s.publishReplay(1),s.refCount());return this.cache},e.prototype.filter=function(e,t,a,n){var r=this;return n.pipe(s.map((function(e){return a?e.filter((function(e){return r.include(e,a)})):e})))},e.prototype.include=function(e,t){var a;return null===(a=e.name)||void 0===a?void 0:a.toLowerCase().includes(t.toLowerCase())},e.prototype.choice=function(e,t){var a,n;if("localName"===t.displayWith){try{for(var r=j(["/","#",":","."]),o=r.next();!o.done;o=r.next()){var l=o.value,s=e.split(l);if(s.length>1)return i.of({value:e,name:s[s.length-1]})}}catch(e){a={error:e}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return i.of({value:e,name:e})}return t.jsonata?"object"==typeof e?i.of(e):i.of({value:e,name:e}):t.displayWithChoices?i.of({value:e,name:t.displayWithChoices[t.choices.indexOf(e)]}):i.of({value:e,name:e})},e.prototype.getChoices=function(e,t,a){return"GET"===a?this.http.get(e,t):this.http.post(e,t,{headers:new l.HttpHeaders({"Content-Type":"application/json"})})},e.prototype.debounceTime=function(){return 0},e}(),R=function(e,t){var a;this.dialogRef=e,this.data=t,this.schema={title:"Edit form",layout:"vertical",order:[["widget","layout","itemlayout"],["title","description"],["example","readOnly"],["required","format","errorMessage"],"choices","class","style"],static:!0,type:"object",properties:{description:{type:"string",static:!0,title:"Description / tooltip"},class:{type:"array",items:{type:"string"},layout:"chips",style:{width:"365px"},static:!0,title:"CSS classes"},style:{type:"object",additionalProperties:{type:"string"},static:!0,title:"CSS styles"}}},t.properties?(this.schema.properties.errorMessage={type:"string",static:!0,title:"Validation error message"},this.schema.properties.required={choices:Object.keys(t.properties),type:"array",layout:"select",items:{type:"string"},static:!0,title:"Required fields"},this.schema.properties.layout={type:"string",enum:["vertical","horizontal"],static:!0,title:"Screen layout"}):(t.items&&(this.schema.properties.layout={type:"string",enum:["vertical","horizontal","select","tab","table","chips"],static:!0,title:"Screen Layout"},this.schema.properties.itemlayout={type:"string",enum:["vertical","horizontal"],static:!0,title:"Item screen layout"}),(null===(a=t.items)||void 0===a?void 0:a.properties)?(this.schema.properties.errorMessage={type:"string",static:!0,title:"Validation error message"},this.schema.properties.required={choices:Object.keys(t.items.properties),type:"array",layout:"select",items:{type:"string"},static:!0,title:"Required fields"}):(this.schema.properties.readOnly={type:"boolean",static:!0,title:"Read only value",style:{"padding-top":"15px"}},this.schema.properties.errorMessage={type:"string",static:!0,title:"Validation error message"},this.schema.properties.format={type:"string",static:!0,title:"Format",widget:"select",choices:[null,"email","ipv4","url","uri"]},this.schema.properties.example={type:"string",static:!0,title:"Example data"},this.schema.properties.title={type:"string",static:!0,title:"Title"},this.schema.properties.widget={type:"string",enum:["text","select","date","textarea","password"],static:!0,title:"Form widget"},this.schema.properties.choices={type:"array",items:{type:"string"},style:{width:"365px"},layout:"chips",static:!0,title:"Input choices"}))};R.ɵfac=function(e){return new(e||R)(t.ɵɵdirectiveInject(m.MatDialogRef),t.ɵɵdirectiveInject(m.MAT_DIALOG_DATA))},R.ɵcmp=t.ɵɵdefineComponent({type:R,selectors:[["lib-edit-element-dialog"]],decls:7,vars:4,consts:[[2,"padding-top","10px"],[3,"value","schema","label","valueChange"],["align","end"],["mat-button","",3,"click"],["mat-raised-button","","cdkFocusInitial","",3,"mat-dialog-close"]],template:function(e,a){1&e&&(t.ɵɵelementStart(0,"mat-dialog-content",0),t.ɵɵelementStart(1,"lib-json-schema-form",1),t.ɵɵlistener("valueChange",(function(e){return a.data=e})),t.ɵɵelementEnd(),t.ɵɵelementEnd(),t.ɵɵelementStart(2,"mat-dialog-actions",2),t.ɵɵelementStart(3,"button",3),t.ɵɵlistener("click",(function(){return a.dialogRef.close()})),t.ɵɵtext(4,"Cancel"),t.ɵɵelementEnd(),t.ɵɵelementStart(5,"button",4),t.ɵɵtext(6,"Ok"),t.ɵɵelementEnd(),t.ɵɵelementEnd()),2&e&&(t.ɵɵadvance(1),t.ɵɵproperty("value",a.data)("schema",a.schema)("label",a.schema.title),t.ɵɵadvance(4),t.ɵɵproperty("mat-dialog-close",a.data))},encapsulation:2}),("undefined"==typeof ngDevMode||ngDevMode)&&t.ɵsetClassMetadata(R,[{type:t.Component,args:[{selector:"lib-edit-element-dialog",templateUrl:"./edit-element-dialog.component.html"}]}],(function(){return[{type:m.MatDialogRef},{type:void 0,decorators:[{type:t.Inject,args:[m.MAT_DIALOG_DATA]}]}]}),null);var _=function(){function e(e,t,a,n,r){this.schemaChange=e,this.name=t,this.schema=a,this.parent=n,this.dialog=r}return e.prototype.canAdd=function(){return this.addable().length>0},e.prototype.addable=function(){var e,t,a,n,r,i,o;if(this.schema.properties)o=this.schema;else if(null===(r=this.schema.items)||void 0===r?void 0:r.properties)o=this.schema.items;else{if(!(null===(i=this.schema.additionalProperties)||void 0===i?void 0:i.properties))return[];o=this.schema.additionalProperties}if(o.order){var l=new Set(Object.keys(o.properties));try{for(var s=j(o.order),c=s.next();!c.done;c=s.next()){var u=c.value;if(Array.isArray(u))try{for(var m=(a=void 0,j(u)),p=m.next();!p.done;p=m.next()){var h=p.value;l.delete(h)}}catch(e){a={error:e}}finally{try{p&&!p.done&&(n=m.return)&&n.call(m)}finally{if(a)throw a.error}}else l.delete(u)}}catch(t){e={error:t}}finally{try{c&&!c.done&&(t=s.return)&&t.call(s)}finally{if(e)throw e.error}}return Array.from(l)}return[]},e.prototype.addSub=function(e){var t,a,n=this.parent.order.indexOf(this.name);if(n>=0)this.parent.order[n]=[this.parent.order[n],e];else try{for(var r=j(this.parent.order),i=r.next();!i.done;i=r.next()){var o=i.value;Array.isArray(o)&&o.indexOf(this.name)>=0&&o.push(e)}}catch(e){t={error:e}}finally{try{i&&!i.done&&(a=r.return)&&a.call(r)}finally{if(t)throw t.error}}this.schemaChange.emit()},e.prototype.canAddSub=function(){return this.subaddable().length>0},e.prototype.subaddable=function(){var e,t,a,n,r;if(null===(r=this.parent)||void 0===r?void 0:r.order){var i=new Set(Object.keys(this.parent.properties));try{for(var o=j(this.parent.order),l=o.next();!l.done;l=o.next()){var s=l.value;if(Array.isArray(s))try{for(var c=(a=void 0,j(s)),u=c.next();!u.done;u=c.next()){var m=u.value;i.delete(m)}}catch(e){a={error:e}}finally{try{u&&!u.done&&(n=c.return)&&n.call(c)}finally{if(a)throw a.error}}else i.delete(s)}}catch(t){e={error:t}}finally{try{l&&!l.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}return Array.from(i)}return[]},e.prototype.add=function(e){var t;this.schema.properties?this.schema.order.push(e):(null===(t=this.schema.items)||void 0===t?void 0:t.properties)?this.schema.items.order.push(e):this.schema.additionalProperties.order.push(e),this.schemaChange.emit()},e.prototype.edit=function(){var e,t,a,n=this,r=JSON.parse(JSON.stringify(this.schema));(null===(t=null===(e=r.items)||void 0===e?void 0:e.examples)||void 0===t?void 0:t.length)>0&&(r.example=r.items.examples[0]),(null===(a=r.examples)||void 0===a?void 0:a.length)>0&&(r.example=r.examples[0]),r.widget||(r.widget="text"),r.layout||(r.layout="horizontal"),r.items&&(r.widget=r.items.widget,r.choices=r.items.choices,r.errorMessage=r.items.errorMessage,r.format=r.items.format,r.required=r.items.required,r.itemlayout=r.items.layout),this.dialog.open(R,{minWidth:"50%",data:r}).afterClosed().subscribe((function(e){var t,a;e&&(n.schema.title=e.title,n.schema.description=e.description,n.schema.widget=e.widget,n.schema.layout=e.layout,n.schema.readOnly=e.readOnly,n.schema.errorMessage=e.errorMessage,e.example&&(e.items?n.schema.items.examples=[e.example]:n.schema.examples=[e.example]),e.style&&delete e.style[""],e.style&&Object.keys(e.style).length>0&&(n.schema.style=e.style),e.class&&(e.class=e.class.filter((function(e){return null!=e}))),(null===(t=e.class)||void 0===t?void 0:t.length)>0&&(n.schema.class=e.class),e.items?((null===(a=e.choices)||void 0===a?void 0:a.length)>0&&(n.schema.items.choices=e.choices),n.schema.items.widget=e.widget,n.schema.items.format=e.format,n.schema.items.errorMessage=e.errorMessage,n.schema.items.required=e.required,n.schema.items.layout=e.itemlayout):(n.schema.choices=e.choices,n.schema.widget=e.widget,n.schema.format=e.format,n.schema.errorMessage=e.errorMessage,n.schema.required=e.required),n.schemaChange.emit())}))},e.prototype.canHide=function(){return!!this.parent},e.prototype.hide=function(){var e,t;this.parent.order||(this.parent.order=Object.keys(this.parent.properties));var a=0;try{for(var n=j(this.parent.order),r=n.next();!r.done;r=n.next()){var i=r.value;Array.isArray(i)&&i.indexOf(this.name)>=0&&(i.splice(i.indexOf(this.name),1),1===i.length&&(this.parent.order[a]=i[0])),a++}}catch(t){e={error:t}}finally{try{r&&!r.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}this.parent.order.indexOf(this.name)>=0&&this.parent.order.splice(this.parent.order.indexOf(this.name),1),this.schemaChange.emit()},e.prototype.canUp=function(){var e,t;if(!this.parent)return!1;var a=this.parent.order?this.parent.order:Object.keys(this.parent.properties),n=a.indexOf(this.name);if(n>=0)return n>0;try{for(var r=j(a),i=r.next();!i.done;i=r.next()){var o=i.value;if(Array.isArray(o)&&o.indexOf(this.name)>=0)return o.indexOf(this.name)>0}}catch(t){e={error:t}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}},e.prototype.up=function(){var e,t;this.parent.order||(this.parent.order=Object.keys(this.parent.properties));var a=this.parent.order.indexOf(this.name);if(a>=0){var n=this.parent.order[a-1];this.parent.order[a-1]=this.parent.order[a],this.parent.order[a]=n}else try{for(var r=j(this.parent.order),i=r.next();!i.done;i=r.next()){var o=i.value;if(Array.isArray(o)&&(a=o.indexOf(this.name))>=0){n=o[a-1];o[a-1]=o[a],o[a]=n}}}catch(t){e={error:t}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}this.schemaChange.emit()},e.prototype.canDown=function(){var e,t;if(!this.parent)return!1;var a=this.parent.order?this.parent.order:Object.keys(this.parent.properties),n=a.indexOf(this.name);if(n>=0)return n<a.length-1;try{for(var r=j(a),i=r.next();!i.done;i=r.next()){var o=i.value;if(Array.isArray(o)&&o.indexOf(this.name)>=0)return o.indexOf(this.name)<o.length-1}}catch(t){e={error:t}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}},e.prototype.down=function(){var e,t;this.parent.order||(this.parent.order=Object.keys(this.parent.properties));var a=this.parent.order.indexOf(this.name);if(a>=0){var n=this.parent.order[a+1];this.parent.order[a+1]=this.parent.order[a],this.parent.order[a]=n}else try{for(var r=j(this.parent.order),i=r.next();!i.done;i=r.next()){var o=i.value;if(Array.isArray(o)&&(a=o.indexOf(this.name))>=0){n=o[a+1];o[a+1]=o[a],o[a]=n}}}catch(t){e={error:t}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}this.schemaChange.emit()},e}(),$=["child"],N=["children"];function H(e,a){if(1&e){var n=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"mat-expansion-panel",3),t.ɵɵelementStart(1,"mat-expansion-panel-header"),t.ɵɵelementStart(2,"mat-panel-title"),t.ɵɵtext(3),t.ɵɵelementEnd(),t.ɵɵelementStart(4,"mat-panel-description"),t.ɵɵtext(5),t.ɵɵelementEnd(),t.ɵɵelementEnd(),t.ɵɵelementStart(6,"lib-json-schema-form",4,5),t.ɵɵlistener("valueChange",(function(e){return t.ɵɵrestoreView(n),t.ɵɵnextContext().setAndEmit(e)}))("schemaChange",(function(){return t.ɵɵrestoreView(n),t.ɵɵnextContext().schemaChange.emit()})),t.ɵɵelementEnd(),t.ɵɵelementEnd()}if(2&e){var r=t.ɵɵnextContext();t.ɵɵproperty("ngStyle",r.schema.style)("ngClass",r.schema.class)("expanded",r.schema.expanded),t.ɵɵadvance(3),t.ɵɵtextInterpolate(r.label),t.ɵɵadvance(2),t.ɵɵtextInterpolate(r.schema.description),t.ɵɵadvance(1),t.ɵɵproperty("label",r.label)("name",r.name)("value",r.value)("switch",r.switch)("rootValue",r.rootValue)("rootSchema",r.rootSchema)("schema",r.schema)("inExpansion",!0)("base",r.base)}}function U(e,a){if(1&e){var n=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"button",14),t.ɵɵlistener("click",(function(){t.ɵɵrestoreView(n);var e=a.$implicit;return t.ɵɵnextContext(3).edit.add(e)})),t.ɵɵtext(1),t.ɵɵelementEnd()}if(2&e){var r=a.$implicit;t.ɵɵadvance(1),t.ɵɵtextInterpolate(r)}}function z(e,a){if(1&e){var n=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"button",14),t.ɵɵlistener("click",(function(){t.ɵɵrestoreView(n);var e=a.$implicit;return t.ɵɵnextContext(3).edit.addSub(e)})),t.ɵɵtext(1),t.ɵɵelementEnd()}if(2&e){var r=a.$implicit;t.ɵɵadvance(1),t.ɵɵtextInterpolate(r)}}function W(e,a){if(1&e){var n=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"div"),t.ɵɵelementStart(1,"mat-icon",12),t.ɵɵtext(2," more_vert "),t.ɵɵelementEnd(),t.ɵɵelementStart(3,"mat-menu",null,13),t.ɵɵelementStart(5,"button",14),t.ɵɵlistener("click",(function(){return t.ɵɵrestoreView(n),t.ɵɵnextContext(2).edit.edit()})),t.ɵɵelementStart(6,"mat-icon"),t.ɵɵtext(7,"edit"),t.ɵɵelementEnd(),t.ɵɵtext(8,"Edit "),t.ɵɵelementEnd(),t.ɵɵelementStart(9,"button",15),t.ɵɵelementStart(10,"mat-icon"),t.ɵɵtext(11,"add"),t.ɵɵelementEnd(),t.ɵɵtext(12,"Show "),t.ɵɵelementEnd(),t.ɵɵelementStart(13,"button",15),t.ɵɵelementStart(14,"mat-icon"),t.ɵɵtext(15,"playlist_add"),t.ɵɵelementEnd(),t.ɵɵtext(16,"Show inline "),t.ɵɵelementEnd(),t.ɵɵelementStart(17,"button",16),t.ɵɵlistener("click",(function(){return t.ɵɵrestoreView(n),t.ɵɵnextContext(2).edit.hide()})),t.ɵɵelementStart(18,"mat-icon"),t.ɵɵtext(19,"remove"),t.ɵɵelementEnd(),t.ɵɵtext(20,"Hide "),t.ɵɵelementEnd(),t.ɵɵelementStart(21,"button",16),t.ɵɵlistener("click",(function(){return t.ɵɵrestoreView(n),t.ɵɵnextContext(2).edit.up()})),t.ɵɵelementStart(22,"mat-icon"),t.ɵɵtext(23,"north_west"),t.ɵɵelementEnd(),t.ɵɵtext(24,"Up / Left "),t.ɵɵelementEnd(),t.ɵɵelementStart(25,"button",16),t.ɵɵlistener("click",(function(){return t.ɵɵrestoreView(n),t.ɵɵnextContext(2).edit.down()})),t.ɵɵelementStart(26,"mat-icon"),t.ɵɵtext(27,"south_east"),t.ɵɵelementEnd(),t.ɵɵtext(28,"Down / Right "),t.ɵɵelementEnd(),t.ɵɵelementEnd(),t.ɵɵelementStart(29,"mat-menu",null,17),t.ɵɵtemplate(31,U,2,1,"button",18),t.ɵɵelementEnd(),t.ɵɵelementStart(32,"mat-menu",null,19),t.ɵɵtemplate(34,z,2,1,"button",18),t.ɵɵelementEnd(),t.ɵɵelementEnd()}if(2&e){var r=t.ɵɵreference(4),i=t.ɵɵreference(30),o=t.ɵɵreference(33),l=t.ɵɵnextContext(2);t.ɵɵadvance(1),t.ɵɵproperty("matMenuTriggerFor",r)("matTooltip",l.name?"Form element "+l.name:l.isRoot?"Form root":""),t.ɵɵadvance(8),t.ɵɵproperty("disabled",!l.edit.canAdd())("matMenuTriggerFor",i),t.ɵɵadvance(4),t.ɵɵproperty("disabled",!l.edit.canAddSub())("matMenuTriggerFor",o),t.ɵɵadvance(4),t.ɵɵproperty("disabled",!l.edit.canHide()),t.ɵɵadvance(4),t.ɵɵproperty("disabled",!l.edit.canUp()),t.ɵɵadvance(4),t.ɵɵproperty("disabled",!l.edit.canDown()),t.ɵɵadvance(6),t.ɵɵproperty("ngForOf",l.edit.addable()),t.ɵɵadvance(3),t.ɵɵproperty("ngForOf",l.edit.subaddable())}}function B(e,a){if(1&e){var n=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"div"),t.ɵɵelementStart(1,"lib-json-schema-form",26,27),t.ɵɵlistener("valueChange",(function(e){t.ɵɵrestoreView(n);var a=t.ɵɵnextContext().$implicit;return t.ɵɵnextContext(4).onValueChange(a.key,e)}))("schemaChange",(function(){return t.ɵɵrestoreView(n),t.ɵɵnextContext(5).schemaChange.emit()})),t.ɵɵelementEnd(),t.ɵɵelementEnd()}if(2&e){var r=t.ɵɵnextContext().$implicit,i=t.ɵɵnextContext(4);t.ɵɵadvance(1),t.ɵɵproperty("name",r.key)("label",r.value.title?r.value.title:r.key)("value",i.value?i.value[r.key]:void 0)("switch",i.value?i.value[i.schema.switch]:void 0)("rootValue",i.rootValue)("rootSchema",i.rootSchema)("schema",r.value)("parentSchema",i.schema)("required",!!i.schema.required&&i.schema.required.includes(r.key))("hideUndefined",i.schema.hideUndefined)("base",i.base)}}function J(e,a){if(1&e&&(t.ɵɵelementStart(0,"div",25),t.ɵɵtemplate(1,B,3,11,"div",7),t.ɵɵelementEnd()),2&e){var n=a.$implicit;t.ɵɵadvance(1),t.ɵɵproperty("ngIf",n.value&&(n.value.type||n.value.$ref))}}function Q(e,a){if(1&e&&(t.ɵɵelementStart(0,"div",23),t.ɵɵtemplate(1,J,2,1,"div",24),t.ɵɵpipe(2,"keyvalue"),t.ɵɵelementEnd()),2&e){var n=a.$implicit,r=t.ɵɵnextContext(3);t.ɵɵproperty("fxLayout","vertical"!==r.schema.layout?"column":"row wrap"),t.ɵɵadvance(1),t.ɵɵproperty("ngForOf",t.ɵɵpipeBind2(2,2,n,r.originalOrder))}}function G(e,a){if(1&e){var n=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"div"),t.ɵɵelementStart(1,"mat-checkbox",31),t.ɵɵlistener("change",(function(){t.ɵɵrestoreView(n);var e=a.$implicit;return t.ɵɵnextContext(4).showProperty(e)})),t.ɵɵtext(2),t.ɵɵelementEnd(),t.ɵɵelementEnd()}if(2&e){var r=a.$implicit,i=t.ɵɵnextContext(4);t.ɵɵadvance(1),t.ɵɵproperty("disabled",!!i.value&&i.value[r])("checked",i.value&&void 0!==i.value[r]),t.ɵɵadvance(1),t.ɵɵtextInterpolate1(" ",r," ")}}function K(e,a){if(1&e&&(t.ɵɵelementStart(0,"div",28),t.ɵɵelementStart(1,"button",29),t.ɵɵelementStart(2,"mat-icon"),t.ɵɵtext(3,"more_vert"),t.ɵɵelementEnd(),t.ɵɵelementEnd(),t.ɵɵelementStart(4,"mat-menu",null,13),t.ɵɵtemplate(6,G,3,3,"div",30),t.ɵɵelementEnd(),t.ɵɵelementEnd()),2&e){var n=t.ɵɵreference(5),r=t.ɵɵnextContext(3);t.ɵɵadvance(1),t.ɵɵproperty("matMenuTriggerFor",n),t.ɵɵadvance(5),t.ɵɵproperty("ngForOf",r.showPropertyList())}}function Z(e,a){if(1&e&&(t.ɵɵelementStart(0,"span",20),t.ɵɵtemplate(1,Q,3,5,"div",21),t.ɵɵtemplate(2,K,7,2,"div",22),t.ɵɵelementEnd()),2&e){var n=t.ɵɵnextContext(2);t.ɵɵproperty("fxLayout","vertical"===n.schema.layout?"column":"row wrap")("ngStyle",n.schema.style)("ngClass",n.schema.class),t.ɵɵadvance(1),t.ɵɵproperty("ngForOf",n.orderedProperties),t.ɵɵadvance(1),t.ɵɵproperty("ngIf",n.schema.hideUndefined)}}function Y(e,a){if(1&e){var n=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"button",38),t.ɵɵlistener("click",(function(){t.ɵɵrestoreView(n);var e=t.ɵɵnextContext().$implicit;return t.ɵɵnextContext(3).removeField(e.key)})),t.ɵɵelementStart(1,"mat-icon"),t.ɵɵtext(2,"remove_circle_outline"),t.ɵɵelementEnd(),t.ɵɵelementEnd()}if(2&e){var r=t.ɵɵnextContext(4);t.ɵɵpropertyInterpolate("matTooltip",r.getLabel())}}function X(e,a){if(1&e){var n=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"div",34),t.ɵɵlistener("mouseenter",(function(){t.ɵɵrestoreView(n);var e=a.index;return t.ɵɵnextContext(3).hover=e}))("mouseleave",(function(){return t.ɵɵrestoreView(n),t.ɵɵnextContext(3).hover=null})),t.ɵɵelementStart(1,"mat-form-field"),t.ɵɵelementStart(2,"mat-label"),t.ɵɵtext(3),t.ɵɵelementEnd(),t.ɵɵelementStart(4,"input",35),t.ɵɵlistener("change",(function(e){t.ɵɵrestoreView(n);var r=a.$implicit;return t.ɵɵnextContext(3).fieldNameChange(r.key,e.target.value)})),t.ɵɵelementEnd(),t.ɵɵelementEnd(),t.ɵɵtext(5,"   "),t.ɵɵelementStart(6,"lib-json-schema-form",36,27),t.ɵɵlistener("valueChange",(function(e){t.ɵɵrestoreView(n);var r=a.$implicit;return t.ɵɵnextContext(3).onValueChange(r.key,e)}))("schemaChange",(function(){return t.ɵɵrestoreView(n),t.ɵɵnextContext(3).schemaChange.emit()})),t.ɵɵelementEnd(),t.ɵɵtemplate(8,Y,3,1,"button",37),t.ɵɵelementEnd()}if(2&e){var r=a.$implicit,i=t.ɵɵnextContext(3);t.ɵɵadvance(3),t.ɵɵtextInterpolate1("",i.getLabel()," key"),t.ɵɵadvance(1),t.ɵɵproperty("disabled",i.readOnly)("value",r.key),t.ɵɵadvance(2),t.ɵɵproperty("label",i.getLabel()+" value")("value",i.value[r.key])("rootValue",i.rootValue)("rootSchema",i.rootSchema)("schema",i.schema.additionalProperties)("base",i.base),t.ɵɵadvance(2),t.ɵɵproperty("ngIf",!i.readOnly)}}function ee(e,a){if(1&e){var n=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"button",39),t.ɵɵlistener("click",(function(){return t.ɵɵrestoreView(n),t.ɵɵnextContext(3).addField()})),t.ɵɵelementStart(1,"mat-icon"),t.ɵɵtext(2,"add_circle_outline"),t.ɵɵelementEnd(),t.ɵɵelementEnd()}if(2&e){var r=t.ɵɵnextContext(3);t.ɵɵpropertyInterpolate("matTooltip",r.getLabel())}}function te(e,a){if(1&e&&(t.ɵɵelementStart(0,"span",20),t.ɵɵtemplate(1,X,9,10,"div",32),t.ɵɵpipe(2,"keyvalue"),t.ɵɵtemplate(3,ee,3,1,"button",33),t.ɵɵelementEnd()),2&e){var n=t.ɵɵnextContext(2);t.ɵɵproperty("fxLayout","vertical"===n.schema.layout?"column":"row wrap")("ngStyle",n.schema.style)("ngClass",n.schema.class),t.ɵɵadvance(1),t.ɵɵproperty("ngForOf",t.ɵɵpipeBind2(2,5,n.value,n.originalOrder)),t.ɵɵadvance(2),t.ɵɵproperty("ngIf",!n.readOnly)}}function ae(e,a){if(1&e){var n=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"mat-form-field"),t.ɵɵelementStart(1,"input",45),t.ɵɵlistener("change",(function(e){t.ɵɵrestoreView(n);var a=t.ɵɵnextContext(2).$implicit;return t.ɵɵnextContext(3).fieldNameChange(a.key,e.target.value)})),t.ɵɵelementEnd(),t.ɵɵelementEnd()}if(2&e){var r=t.ɵɵnextContext(2).$implicit;t.ɵɵadvance(1),t.ɵɵproperty("value",r.key)}}function ne(e,a){if(1&e&&(t.ɵɵelementStart(0,"span"),t.ɵɵtext(1),t.ɵɵelementEnd()),2&e){var n=t.ɵɵnextContext(2).$implicit;t.ɵɵadvance(1),t.ɵɵtextInterpolate(n.key)}}function re(e,a){if(1&e&&(t.ɵɵtemplate(0,ae,2,1,"mat-form-field",7),t.ɵɵtemplate(1,ne,2,1,"span",7)),2&e){var n=t.ɵɵnextContext(4);t.ɵɵproperty("ngIf",!n.readOnly),t.ɵɵadvance(1),t.ɵɵproperty("ngIf",n.readOnly)}}function ie(e,a){if(1&e){var n=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"button",38),t.ɵɵlistener("click",(function(){t.ɵɵrestoreView(n);var e=t.ɵɵnextContext().$implicit;return t.ɵɵnextContext(3).removeField(e.key)})),t.ɵɵelementStart(1,"mat-icon"),t.ɵɵtext(2,"remove_circle_outline"),t.ɵɵelementEnd(),t.ɵɵelementEnd()}if(2&e){var r=t.ɵɵnextContext(4);t.ɵɵpropertyInterpolate("matTooltip",r.getLabel())}}function oe(e,a){if(1&e){var n=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"mat-tab",42),t.ɵɵtemplate(1,re,2,2,"ng-template",43),t.ɵɵelementStart(2,"lib-json-schema-form",44,27),t.ɵɵlistener("valueChange",(function(e){t.ɵɵrestoreView(n);var r=a.$implicit;return t.ɵɵnextContext(3).onValueChange(r.key,e)}))("schemaChange",(function(){return t.ɵɵrestoreView(n),t.ɵɵnextContext(3).schemaChange.emit()})),t.ɵɵelementEnd(),t.ɵɵtemplate(4,ie,3,1,"button",37),t.ɵɵelementEnd()}if(2&e){var r=a.$implicit,i=t.ɵɵnextContext(3);t.ɵɵadvance(2),t.ɵɵproperty("value",i.value[r.key])("rootValue",i.rootValue)("rootSchema",i.rootSchema)("schema",i.schema.additionalProperties)("base",i.base),t.ɵɵadvance(2),t.ɵɵproperty("ngIf",!i.readOnly)}}function le(e,a){if(1&e){var n=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"button",39),t.ɵɵlistener("click",(function(){return t.ɵɵrestoreView(n),t.ɵɵnextContext(4).addField()})),t.ɵɵelementStart(1,"mat-icon"),t.ɵɵtext(2,"add_circle_outline"),t.ɵɵelementEnd(),t.ɵɵelementEnd()}if(2&e){var r=t.ɵɵnextContext(4);t.ɵɵpropertyInterpolate("matTooltip",r.getLabel())}}function se(e,a){1&e&&(t.ɵɵelementStart(0,"mat-tab"),t.ɵɵtemplate(1,le,3,1,"ng-template",43),t.ɵɵelementEnd())}function ce(e,a){if(1&e&&(t.ɵɵelementStart(0,"mat-tab-group",40),t.ɵɵtemplate(1,oe,5,6,"mat-tab",41),t.ɵɵpipe(2,"keyvalue"),t.ɵɵtemplate(3,se,2,0,"mat-tab",7),t.ɵɵelementEnd()),2&e){var n=t.ɵɵnextContext(2);t.ɵɵproperty("ngStyle",n.schema.style)("ngClass",n.schema.class),t.ɵɵadvance(1),t.ɵɵproperty("ngForOf",t.ɵɵpipeBind2(2,4,n.value,n.originalOrder)),t.ɵɵadvance(2),t.ɵɵproperty("ngIf",!n.readOnly)}}function ue(e,a){if(1&e){var n=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"button",38),t.ɵɵlistener("click",(function(){t.ɵɵrestoreView(n);var e=t.ɵɵnextContext().index;return t.ɵɵnextContext(3).remove(e)})),t.ɵɵelementStart(1,"mat-icon"),t.ɵɵtext(2,"remove_circle_outline"),t.ɵɵelementEnd(),t.ɵɵelementEnd()}if(2&e){var r=t.ɵɵnextContext(4);t.ɵɵpropertyInterpolate("matTooltip",r.getLabel())}}function me(e,a){if(1&e){var n=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"div",34),t.ɵɵlistener("mouseenter",(function(){t.ɵɵrestoreView(n);var e=a.index;return t.ɵɵnextContext(3).hover=e}))("mouseleave",(function(){return t.ɵɵrestoreView(n),t.ɵɵnextContext(3).hover=null})),t.ɵɵelementStart(1,"lib-json-schema-form",36,27),t.ɵɵlistener("valueChange",(function(e){t.ɵɵrestoreView(n);var r=a.index;return t.ɵɵnextContext(3).setIndexAndEmit(r,e)}))("schemaChange",(function(){return t.ɵɵrestoreView(n),t.ɵɵnextContext(3).schemaChange.emit()})),t.ɵɵelementEnd(),t.ɵɵtemplate(3,ue,3,1,"button",37),t.ɵɵelementEnd()}if(2&e){var r=a.index,i=t.ɵɵnextContext(3);t.ɵɵadvance(1),t.ɵɵproperty("label",i.getLabel())("value",i.value[r])("rootValue",i.rootValue)("rootSchema",i.rootSchema)("schema",i.schema.items)("base",i.base),t.ɵɵadvance(2),t.ɵɵproperty("ngIf",!i.readOnly)}}function pe(e,a){if(1&e){var n=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"button",39),t.ɵɵlistener("click",(function(){return t.ɵɵrestoreView(n),t.ɵɵnextContext(3).add()})),t.ɵɵelementStart(1,"mat-icon"),t.ɵɵtext(2,"add_circle_outline"),t.ɵɵelementEnd(),t.ɵɵelementEnd()}if(2&e){var r=t.ɵɵnextContext(3);t.ɵɵpropertyInterpolate("matTooltip",r.getLabel())}}function he(e,a){if(1&e&&(t.ɵɵelementStart(0,"span",20),t.ɵɵtemplate(1,me,4,7,"div",32),t.ɵɵtemplate(2,pe,3,1,"button",33),t.ɵɵelementEnd()),2&e){var n=t.ɵɵnextContext(2);t.ɵɵproperty("fxLayout","vertical"===n.schema.layout?"column":"row wrap")("ngStyle",n.schema.style)("ngClass",n.schema.class),t.ɵɵadvance(1),t.ɵɵproperty("ngForOf",n.value),t.ɵɵadvance(1),t.ɵɵproperty("ngIf",!n.readOnly)}}function de(e,a){if(1&e){var n=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"mat-chip",51),t.ɵɵlistener("removed",(function(){t.ɵɵrestoreView(n);var e=a.$implicit;return t.ɵɵnextContext(3).removeChip(e)})),t.ɵɵtext(1),t.ɵɵelementStart(2,"mat-icon",52),t.ɵɵtext(3,"cancel"),t.ɵɵelementEnd(),t.ɵɵelementEnd()}if(2&e){var r=a.$implicit,i=t.ɵɵnextContext(3);t.ɵɵproperty("removable",!i.readOnly),t.ɵɵadvance(1),t.ɵɵtextInterpolate1(" ",r," ")}}function fe(e,a){if(1&e){var n=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"span"),t.ɵɵelementStart(1,"mat-form-field",46),t.ɵɵelementStart(2,"mat-chip-list",47,48),t.ɵɵlistener("cdkDropListDropped",(function(e){return t.ɵɵrestoreView(n),t.ɵɵnextContext(2).dropChip(e)})),t.ɵɵtemplate(4,de,4,2,"mat-chip",49),t.ɵɵelementStart(5,"input",50),t.ɵɵlistener("matChipInputTokenEnd",(function(e){return t.ɵɵrestoreView(n),t.ɵɵnextContext(2).addChip(e)})),t.ɵɵelementEnd(),t.ɵɵelementEnd(),t.ɵɵelementEnd(),t.ɵɵelementEnd()}if(2&e){var r=t.ɵɵreference(3),i=t.ɵɵnextContext(2);t.ɵɵadvance(1),t.ɵɵproperty("ngStyle",i.schema.style)("ngClass",i.schema.class),t.ɵɵadvance(3),t.ɵɵproperty("ngForOf",i.value),t.ɵɵadvance(1),t.ɵɵproperty("placeholder",i.schema.title)("matChipInputFor",r)("matChipInputSeparatorKeyCodes",i.separatorKeysCodes)("disabled",i.readOnly)}}function ve(e,a){if(1&e){var n=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"button",38),t.ɵɵlistener("click",(function(){t.ɵɵrestoreView(n);var e=t.ɵɵnextContext().index;return t.ɵɵnextContext(3).remove(e)})),t.ɵɵelementStart(1,"mat-icon"),t.ɵɵtext(2,"remove_circle_outline"),t.ɵɵelementEnd(),t.ɵɵelementEnd()}if(2&e){var r=t.ɵɵnextContext(4);t.ɵɵpropertyInterpolate("matTooltip",r.getLabel())}}function ye(e,a){if(1&e){var n=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"mat-tab",54),t.ɵɵelementStart(1,"lib-json-schema-form",44,27),t.ɵɵlistener("valueChange",(function(e){t.ɵɵrestoreView(n);var r=a.index;return t.ɵɵnextContext(3).setIndexAndEmit(r,e)}))("schemaChange",(function(){return t.ɵɵrestoreView(n),t.ɵɵnextContext(3).schemaChange.emit()})),t.ɵɵelementEnd(),t.ɵɵtemplate(3,ve,3,1,"button",37),t.ɵɵelementEnd()}if(2&e){var r=a.index,i=t.ɵɵnextContext(3);t.ɵɵproperty("label",i.getLabel()+" "+r),t.ɵɵadvance(1),t.ɵɵproperty("value",i.value[r])("rootValue",i.rootValue)("rootSchema",i.rootSchema)("schema",i.schema.items)("base",i.base),t.ɵɵadvance(2),t.ɵɵproperty("ngIf",!i.readOnly)}}function ge(e,a){if(1&e){var n=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"button",39),t.ɵɵlistener("click",(function(){return t.ɵɵrestoreView(n),t.ɵɵnextContext(4).add()})),t.ɵɵelementStart(1,"mat-icon"),t.ɵɵtext(2,"add_circle_outline"),t.ɵɵelementEnd(),t.ɵɵelementEnd()}if(2&e){var r=t.ɵɵnextContext(4);t.ɵɵpropertyInterpolate("matTooltip",r.getLabel())}}function xe(e,a){1&e&&(t.ɵɵelementStart(0,"mat-tab"),t.ɵɵtemplate(1,ge,3,1,"ng-template",43),t.ɵɵelementEnd())}function Ce(e,a){if(1&e&&(t.ɵɵelementStart(0,"mat-tab-group",40),t.ɵɵtemplate(1,ye,4,7,"mat-tab",53),t.ɵɵtemplate(2,xe,2,0,"mat-tab",7),t.ɵɵelementEnd()),2&e){var n=t.ɵɵnextContext(2);t.ɵɵproperty("ngStyle",n.schema.style)("ngClass",n.schema.class),t.ɵɵadvance(1),t.ɵɵproperty("ngForOf",n.value),t.ɵɵadvance(1),t.ɵɵproperty("ngIf",!n.readOnly)}}function be(e,a){if(1&e&&(t.ɵɵelementStart(0,"th",58),t.ɵɵtext(1),t.ɵɵelementEnd()),2&e){var n=a.$implicit;t.ɵɵadvance(1),t.ɵɵtextInterpolate1(" ",n.value.title?n.value.title:n.key,"")}}function Se(e,a){if(1&e){var n=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"td"),t.ɵɵelementStart(1,"lib-json-schema-form",59,27),t.ɵɵlistener("valueChange",(function(e){t.ɵɵrestoreView(n);var r=a.$implicit,i=t.ɵɵnextContext().index;return t.ɵɵnextContext(3).setIndexAndEmitTable(i,r.key,e)}))("schemaChange",(function(){return t.ɵɵrestoreView(n),t.ɵɵnextContext(4).schemaChange.emit()})),t.ɵɵelementEnd(),t.ɵɵelementEnd()}if(2&e){var r=a.$implicit,i=t.ɵɵnextContext().$implicit,o=t.ɵɵnextContext(3);t.ɵɵadvance(1),t.ɵɵproperty("value",i[r.key])("rootValue",o.rootValue)("rootSchema",o.rootSchema)("schema",o.schema.items.properties[r.key])("base",o.base)}}function we(e,a){if(1&e){var n=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"button",39),t.ɵɵlistener("click",(function(){t.ɵɵrestoreView(n);var e=t.ɵɵnextContext().index;return t.ɵɵnextContext(3).remove(e)})),t.ɵɵelementStart(1,"mat-icon"),t.ɵɵtext(2,"remove_circle_outline"),t.ɵɵelementEnd(),t.ɵɵelementEnd()}if(2&e){var r=t.ɵɵnextContext(4);t.ɵɵpropertyInterpolate("matTooltip",r.getLabel())}}function Me(e,a){if(1&e&&(t.ɵɵelementStart(0,"tr"),t.ɵɵtemplate(1,Se,3,5,"td",30),t.ɵɵpipe(2,"keyvalue"),t.ɵɵelementStart(3,"td"),t.ɵɵtemplate(4,we,3,1,"button",33),t.ɵɵelementEnd(),t.ɵɵelementEnd()),2&e){var n=t.ɵɵnextContext(3);t.ɵɵadvance(1),t.ɵɵproperty("ngForOf",t.ɵɵpipeBind2(2,2,n.schema.items.properties,n.originalOrder)),t.ɵɵadvance(3),t.ɵɵproperty("ngIf",!n.readOnly)}}function Ee(e,a){if(1&e){var n=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"button",39),t.ɵɵlistener("click",(function(){return t.ɵɵrestoreView(n),t.ɵɵnextContext(3).add()})),t.ɵɵelementStart(1,"mat-icon"),t.ɵɵtext(2,"add_circle_outline"),t.ɵɵelementEnd(),t.ɵɵelementEnd()}if(2&e){var r=t.ɵɵnextContext(3);t.ɵɵpropertyInterpolate("matTooltip",r.getLabel())}}function Ie(e,a){if(1&e&&(t.ɵɵelementStart(0,"span",46),t.ɵɵelementStart(1,"table",55),t.ɵɵelementStart(2,"tr"),t.ɵɵtemplate(3,be,2,1,"th",56),t.ɵɵpipe(4,"keyvalue"),t.ɵɵelement(5,"th",57),t.ɵɵelementEnd(),t.ɵɵtemplate(6,Me,5,5,"tr",30),t.ɵɵelementEnd(),t.ɵɵtemplate(7,Ee,3,1,"button",33),t.ɵɵelementEnd()),2&e){var n=t.ɵɵnextContext(2);t.ɵɵproperty("ngStyle",n.schema.style)("ngClass",n.schema.class),t.ɵɵadvance(3),t.ɵɵproperty("ngForOf",t.ɵɵpipeBind2(4,5,n.schema.items.properties,n.originalOrder)),t.ɵɵadvance(3),t.ɵɵproperty("ngForOf",n.value),t.ɵɵadvance(1),t.ɵɵproperty("ngIf",!n.readOnly)}}function Oe(e,a){if(1&e&&(t.ɵɵelementStart(0,"mat-option",63),t.ɵɵtext(1),t.ɵɵelementEnd()),2&e){var n=a.$implicit;t.ɵɵproperty("value",n),t.ɵɵadvance(1),t.ɵɵtextInterpolate(n)}}function Ve(e,a){if(1&e){var n=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"div"),t.ɵɵelementStart(1,"mat-form-field",46),t.ɵɵelementStart(2,"mat-label"),t.ɵɵtext(3),t.ɵɵelementEnd(),t.ɵɵelementStart(4,"mat-select",60),t.ɵɵlistener("selectionChange",(function(e){return t.ɵɵrestoreView(n),t.ɵɵnextContext(2).change(e)})),t.ɵɵtemplate(5,Oe,2,2,"mat-option",61),t.ɵɵelementEnd(),t.ɵɵelementEnd(),t.ɵɵelementStart(6,"p",62),t.ɵɵtext(7),t.ɵɵelementEnd(),t.ɵɵelementEnd()}if(2&e){var r=t.ɵɵnextContext(2);t.ɵɵadvance(1),t.ɵɵproperty("ngStyle",r.schema.style)("ngClass",r.schema.class),t.ɵɵadvance(2),t.ɵɵtextInterpolate(r.label),t.ɵɵadvance(1),t.ɵɵproperty("value",r.value)("disabled",r.readOnly),t.ɵɵadvance(1),t.ɵɵproperty("ngForOf",r.schema.enum),t.ɵɵadvance(2),t.ɵɵtextInterpolate(r.error())}}function ke(e,a){if(1&e&&(t.ɵɵelementStart(0,"mat-option",67),t.ɵɵtext(1),t.ɵɵelementEnd()),2&e){var n=a.$implicit;t.ɵɵproperty("value",n.value)("matTooltip",n.name!==n.value?n.value:null),t.ɵɵadvance(1),t.ɵɵtextInterpolate1(" ",n.name," ")}}function Fe(e,a){if(1&e){var n=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"div"),t.ɵɵelementStart(1,"mat-form-field",64),t.ɵɵelementStart(2,"mat-label"),t.ɵɵtext(3),t.ɵɵelementEnd(),t.ɵɵelementStart(4,"mat-select",65),t.ɵɵlistener("focus",(function(){return t.ɵɵrestoreView(n),t.ɵɵnextContext(2).focus()}))("selectionChange",(function(e){return t.ɵɵrestoreView(n),t.ɵɵnextContext(2).change(e)})),t.ɵɵtemplate(5,ke,2,3,"mat-option",66),t.ɵɵpipe(6,"async"),t.ɵɵelementEnd(),t.ɵɵelementEnd(),t.ɵɵelementStart(7,"p",62),t.ɵɵtext(8),t.ɵɵelementEnd(),t.ɵɵelementEnd()}if(2&e){var r=t.ɵɵnextContext(2);t.ɵɵadvance(1),t.ɵɵproperty("matTooltip",r.schema.description)("ngStyle",r.schema.style)("ngClass",r.schema.class),t.ɵɵadvance(2),t.ɵɵtextInterpolate(r.label),t.ɵɵadvance(1),t.ɵɵproperty("value",r.value)("disabled",r.readOnly),t.ɵɵadvance(1),t.ɵɵproperty("ngForOf",t.ɵɵpipeBind1(6,8,r.choices)),t.ɵɵadvance(3),t.ɵɵtextInterpolate(r.error())}}function Te(e,a){if(1&e){var n=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"div"),t.ɵɵelementStart(1,"mat-form-field",46),t.ɵɵelementStart(2,"mat-label"),t.ɵɵtext(3),t.ɵɵelementEnd(),t.ɵɵelementStart(4,"input",68),t.ɵɵlistener("dateChange",(function(e){return t.ɵɵrestoreView(n),t.ɵɵnextContext(2).change(e)})),t.ɵɵelementEnd(),t.ɵɵelement(5,"mat-datepicker-toggle",69),t.ɵɵelement(6,"mat-datepicker",null,70),t.ɵɵelementEnd(),t.ɵɵelementStart(8,"p",62),t.ɵɵtext(9),t.ɵɵelementEnd(),t.ɵɵelementEnd()}if(2&e){var r=t.ɵɵreference(7),i=t.ɵɵnextContext(2);t.ɵɵadvance(1),t.ɵɵproperty("ngStyle",i.schema.style)("ngClass",i.schema.class),t.ɵɵadvance(2),t.ɵɵtextInterpolate(i.label),t.ɵɵadvance(1),t.ɵɵproperty("value",i.parseDate(i.value,i.schema.dateFormat))("matDatepicker",r)("disabled",i.readOnly),t.ɵɵadvance(1),t.ɵɵproperty("for",r),t.ɵɵadvance(4),t.ɵɵtextInterpolate(i.error())}}function De(e,a){if(1&e){var n=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"div",71),t.ɵɵelementStart(1,"mat-checkbox",72),t.ɵɵlistener("change",(function(e){return t.ɵɵrestoreView(n),t.ɵɵnextContext(2).change(e)})),t.ɵɵtext(2),t.ɵɵelementEnd(),t.ɵɵelementStart(3,"p",62),t.ɵɵtext(4),t.ɵɵelementEnd(),t.ɵɵelementEnd()}if(2&e){var r=t.ɵɵnextContext(2);t.ɵɵproperty("ngStyle",r.schema.style)("ngClass",r.schema.class),t.ɵɵadvance(1),t.ɵɵproperty("checked",r.value)("disabled",r.readOnly),t.ɵɵadvance(1),t.ɵɵtextInterpolate1(" ",r.label,""),t.ɵɵadvance(2),t.ɵɵtextInterpolate(r.error())}}function je(e,a){if(1&e&&(t.ɵɵelementStart(0,"mat-option",67),t.ɵɵtext(1),t.ɵɵelementEnd()),2&e){var n=a.$implicit;t.ɵɵproperty("value",n.value)("matTooltip",n.name!==n.value?n.value:null),t.ɵɵadvance(1),t.ɵɵtextInterpolate1(" ",n.name," ")}}function Ae(e,a){if(1&e){var n=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"mat-form-field",46),t.ɵɵelementStart(1,"mat-label"),t.ɵɵtext(2),t.ɵɵelementEnd(),t.ɵɵelementStart(3,"mat-select",73),t.ɵɵlistener("focus",(function(){return t.ɵɵrestoreView(n),t.ɵɵnextContext(3).focus()}))("selectionChange",(function(e){return t.ɵɵrestoreView(n),t.ɵɵnextContext(3).change(e)})),t.ɵɵtemplate(4,je,2,3,"mat-option",66),t.ɵɵpipe(5,"async"),t.ɵɵelementEnd(),t.ɵɵelementEnd()}if(2&e){var r=t.ɵɵnextContext(3);t.ɵɵproperty("ngStyle",r.schema.style)("ngClass",r.schema.class),t.ɵɵadvance(2),t.ɵɵtextInterpolate(r.label),t.ɵɵadvance(1),t.ɵɵproperty("value",r.value)("disabled",r.readOnly),t.ɵɵadvance(1),t.ɵɵproperty("ngForOf",t.ɵɵpipeBind1(5,6,r.choices))}}function Le(e,a){if(1&e&&(t.ɵɵelementStart(0,"mat-option",67),t.ɵɵtext(1),t.ɵɵelementEnd()),2&e){var n=a.$implicit;t.ɵɵproperty("value",n.value)("matTooltip",n.name!==n.value?n.value:null),t.ɵɵadvance(1),t.ɵɵtextInterpolate1(" ",n.name," ")}}function qe(e,a){if(1&e){var n=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"mat-form-field",46),t.ɵɵelementStart(1,"mat-label"),t.ɵɵtext(2),t.ɵɵelementEnd(),t.ɵɵelementStart(3,"input",74),t.ɵɵlistener("focus",(function(){return t.ɵɵrestoreView(n),t.ɵɵnextContext(3).focus()})),t.ɵɵelementEnd(),t.ɵɵelementStart(4,"mat-autocomplete",null,75),t.ɵɵtemplate(6,Le,2,3,"mat-option",66),t.ɵɵpipe(7,"async"),t.ɵɵelementEnd(),t.ɵɵelementEnd()}if(2&e){var r=t.ɵɵreference(5),i=t.ɵɵnextContext(3);t.ɵɵproperty("ngStyle",i.schema.style)("ngClass",i.schema.class),t.ɵɵadvance(2),t.ɵɵtextInterpolate(i.label),t.ɵɵadvance(1),t.ɵɵproperty("formControl",i.control)("matAutocomplete",r),t.ɵɵadvance(3),t.ɵɵproperty("ngForOf",t.ɵɵpipeBind1(7,6,i.filteredOptions))}}function Pe(e,a){if(1&e&&(t.ɵɵelementStart(0,"div"),t.ɵɵtemplate(1,Ae,6,8,"mat-form-field",10),t.ɵɵtemplate(2,qe,8,8,"mat-form-field",10),t.ɵɵelementStart(3,"p",62),t.ɵɵtext(4),t.ɵɵelementEnd(),t.ɵɵelementEnd()),2&e){var n=t.ɵɵnextContext(2);t.ɵɵadvance(1),t.ɵɵproperty("ngIf","select"===n.schema.widget),t.ɵɵadvance(1),t.ɵɵproperty("ngIf","select"!==n.schema.widget),t.ɵɵadvance(2),t.ɵɵtextInterpolate(n.error())}}function Re(e,a){if(1&e){var n=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"input",78),t.ɵɵlistener("input",(function(e){return t.ɵɵrestoreView(n),t.ɵɵnextContext(3).change(e)}))("focus",(function(){t.ɵɵrestoreView(n);var e=t.ɵɵnextContext(3);return"password"==e.getInputType(e.schema)?e.value="":""})),t.ɵɵelementEnd()}if(2&e){var r=t.ɵɵnextContext(3);t.ɵɵproperty("disabled",r.readOnly)("placeholder",r.example())("type",r.getInputType(r.schema))("value",r.value)}}function _e(e,a){if(1&e){var n=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"input",79),t.ɵɵlistener("change",(function(e){return t.ɵɵrestoreView(n),t.ɵɵnextContext(3).change(e)})),t.ɵɵelementEnd()}if(2&e){var r=t.ɵɵnextContext(3);t.ɵɵproperty("disabled",r.readOnly)("placeholder",r.example())("type",r.getInputType(r.schema))("value",r.value)}}function $e(e,a){if(1&e&&(t.ɵɵelementStart(0,"div"),t.ɵɵelementStart(1,"mat-form-field",46),t.ɵɵelementStart(2,"mat-label"),t.ɵɵtext(3),t.ɵɵelementEnd(),t.ɵɵtemplate(4,Re,1,4,"input",76),t.ɵɵtemplate(5,_e,1,4,"input",77),t.ɵɵelementEnd(),t.ɵɵelementStart(6,"p",62),t.ɵɵtext(7),t.ɵɵelementEnd(),t.ɵɵelementEnd()),2&e){var n=t.ɵɵnextContext(2);t.ɵɵadvance(1),t.ɵɵproperty("ngStyle",n.schema.style)("ngClass",n.schema.class),t.ɵɵadvance(2),t.ɵɵtextInterpolate(n.label),t.ɵɵadvance(1),t.ɵɵproperty("ngIf",!n.inArray),t.ɵɵadvance(1),t.ɵɵproperty("ngIf",n.inArray),t.ɵɵadvance(2),t.ɵɵtextInterpolate(n.error())}}function Ne(e,a){if(1&e){var n=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"textarea",82),t.ɵɵlistener("input",(function(e){return t.ɵɵrestoreView(n),t.ɵɵnextContext(3).change(e)})),t.ɵɵelementEnd()}if(2&e){var r=t.ɵɵnextContext(3);t.ɵɵproperty("disabled",r.readOnly)("placeholder",r.example())("value",r.value)("ngStyle",r.schema.style)("ngClass",r.schema.class)}}function He(e,a){if(1&e){var n=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"textarea",83),t.ɵɵlistener("change",(function(e){return t.ɵɵrestoreView(n),t.ɵɵnextContext(3).change(e)})),t.ɵɵelementEnd()}if(2&e){var r=t.ɵɵnextContext(3);t.ɵɵproperty("disabled",r.readOnly)("placeholder",r.example())("value",r.value)("ngStyle",r.schema.style)("ngClass",r.schema.class)}}function Ue(e,a){if(1&e&&(t.ɵɵelementStart(0,"div"),t.ɵɵelementStart(1,"mat-form-field",46),t.ɵɵelementStart(2,"mat-label"),t.ɵɵtext(3),t.ɵɵelementEnd(),t.ɵɵtemplate(4,Ne,1,5,"textarea",80),t.ɵɵtemplate(5,He,1,5,"textarea",81),t.ɵɵelementEnd(),t.ɵɵelementStart(6,"p",62),t.ɵɵtext(7),t.ɵɵelementEnd(),t.ɵɵelementEnd()),2&e){var n=t.ɵɵnextContext(2);t.ɵɵadvance(1),t.ɵɵproperty("ngStyle",n.schema.style)("ngClass",n.schema.class),t.ɵɵadvance(2),t.ɵɵtextInterpolate(n.label),t.ɵɵadvance(1),t.ɵɵproperty("ngIf",!n.inArray),t.ɵɵadvance(1),t.ɵɵproperty("ngIf",n.inArray),t.ɵɵadvance(2),t.ɵɵtextInterpolate(n.error())}}function ze(e,a){if(1&e){var n=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"div"),t.ɵɵelementStart(1,"input",84),t.ɵɵlistener("change",(function(e){return t.ɵɵrestoreView(n),t.ɵɵnextContext(2).handleFileInput(e)})),t.ɵɵelementEnd(),t.ɵɵelementStart(2,"p",62),t.ɵɵtext(3),t.ɵɵelementEnd(),t.ɵɵelementEnd()}if(2&e){var r=t.ɵɵnextContext(2);t.ɵɵadvance(1),t.ɵɵproperty("ngStyle",r.schema.style)("ngClass",r.schema.class)("disabled",r.readOnly),t.ɵɵadvance(2),t.ɵɵtextInterpolate(r.error())}}function We(e,a){if(1&e&&(t.ɵɵelementStart(0,"div",6),t.ɵɵtemplate(1,W,35,11,"div",7),t.ɵɵtemplate(2,Z,3,5,"span",8),t.ɵɵtemplate(3,te,4,8,"span",8),t.ɵɵtemplate(4,ce,4,7,"mat-tab-group",9),t.ɵɵtemplate(5,he,3,5,"span",8),t.ɵɵtemplate(6,fe,6,7,"span",7),t.ɵɵtemplate(7,Ce,3,4,"mat-tab-group",9),t.ɵɵtemplate(8,Ie,8,8,"span",10),t.ɵɵtemplate(9,Ve,8,7,"div",7),t.ɵɵtemplate(10,Fe,9,10,"div",7),t.ɵɵtemplate(11,Te,10,8,"div",7),t.ɵɵtemplate(12,De,5,6,"div",11),t.ɵɵtemplate(13,Pe,5,3,"div",7),t.ɵɵtemplate(14,$e,8,6,"div",7),t.ɵɵtemplate(15,Ue,8,6,"div",7),t.ɵɵtemplate(16,ze,4,4,"div",7),t.ɵɵelementEnd()),2&e){var n=t.ɵɵnextContext();t.ɵɵproperty("matTooltip",n.schema.description),t.ɵɵadvance(1),t.ɵɵproperty("ngIf",n.service.editMode&&!n.schema.static&&!n.inArray&&"none"!==n.getLayout()),t.ɵɵadvance(1),t.ɵɵproperty("ngIf","object"===n.getLayout()),t.ɵɵadvance(1),t.ɵɵproperty("ngIf","additionalProperties"===n.getLayout()),t.ɵɵadvance(1),t.ɵɵproperty("ngIf","additionalPropertiesTab"===n.getLayout()),t.ɵɵadvance(1),t.ɵɵproperty("ngIf","array"===n.getLayout()),t.ɵɵadvance(1),t.ɵɵproperty("ngIf","chips"===n.getLayout()),t.ɵɵadvance(1),t.ɵɵproperty("ngIf","tab"===n.getLayout()),t.ɵɵadvance(1),t.ɵɵproperty("ngIf","table"===n.getLayout()),t.ɵɵadvance(1),t.ɵɵproperty("ngIf","enum"===n.getLayout()),t.ɵɵadvance(1),t.ɵɵproperty("ngIf","array-select"===n.getLayout()),t.ɵɵadvance(1),t.ɵɵproperty("ngIf","date"===n.getLayout()),t.ɵɵadvance(1),t.ɵɵproperty("ngIf","checkbox"===n.getLayout()),t.ɵɵadvance(1),t.ɵɵproperty("ngIf","autocomplete"===n.getLayout()),t.ɵɵadvance(1),t.ɵɵproperty("ngIf","single"===n.getLayout()),t.ɵɵadvance(1),t.ɵɵproperty("ngIf","textarea"===n.getLayout()),t.ɵɵadvance(1),t.ɵɵproperty("ngIf","upload"===n.getLayout())}}function Be(e,t){}var Je=function(){function e(e,a,n,r){this.http=e,this.componentFactoryResolver=a,this.service=n,this.dialog=r,this.valueChange=new t.EventEmitter,this.errorChange=new t.EventEmitter,this.schemaChange=new t.EventEmitter,this.isRoot=!1,this.separatorKeysCodes=[h.ENTER,h.COMMA,h.TAB],this.originalOrder=function(e,t){return 0}}return e.prototype.setOrderedProperties=function(){var e,t,a,n,r,i;if(this.schema.order){this.orderedProperties=[];try{for(var o=j(this.schema.order),l=o.next();!l.done;l=o.next()){var s=l.value,c=Array.isArray(s)?s:[s],u={};try{for(var m=(a=void 0,j(c)),p=m.next();!p.done;p=m.next()){var h=p.value;u[h]=this.schema.properties[h]}}catch(e){a={error:e}}finally{try{p&&!p.done&&(n=m.return)&&n.call(m)}finally{if(a)throw a.error}}this.orderedProperties.push(u)}}catch(t){e={error:t}}finally{try{l&&!l.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}}else if(this.schema.properties){this.orderedProperties=[];try{for(var d=j(Object.entries(this.schema.properties)),f=d.next();!f.done;f=d.next()){var v=A(f.value,2),y=v[0],g=v[1];(u={})[y]=g,this.orderedProperties.push(u)}}catch(e){r={error:e}}finally{try{f&&!f.done&&(i=d.return)&&i.call(d)}finally{if(r)throw r.error}}}},e.prototype.ngOnInit=function(){var e,t,a,n,r=this;if(this.readOnly=this.schema.readOnly||this.schema.createOnly&&this.value,this.rootSchema||(this.rootSchema=this.schema,this.rootValue=this.value,this.isRoot=!0),this.schema.type)this.setOrderedProperties();else{var o=this.schema.$ref.split("#");1===o.length?this.url(o[0],null):o[0]?this.url(o[0],o[1]):(this.schema=q.jsonPointer(this.rootSchema,o[1]),this.setOrderedProperties())}if(void 0===this.value&&(this.schema.default?(this.value=this.schema.default,setTimeout((function(){return r.emit(r.value)}),500)):this.hideUndefined||(this.value=null)),"custom"===this.getLayout()&&this.loadComponent(),this.isRoot&&setTimeout((function(){r.errorChange.emit(r.recursiveError())}),10),this.ch=this.service.displayWithRegistry[this.schema.displayWith],this.ch||(this.ch=new P(this.http)),this.control=new u.FormControl(this.value),this.choices=new i.ReplaySubject,Array.isArray(this.value)){var l=[];try{for(var c=j(this.value),m=c.next();!m.done;m=c.next()){var p=m.value;l.push({name:p,value:p})}}catch(t){e={error:t}}finally{try{m&&!m.done&&(t=c.return)&&t.call(c)}finally{if(e)throw e.error}}this.choices.next(l)}else this.choices.next([{name:this.value,value:this.value}]);if(this.value||0===this.value)if(Array.isArray(this.value)){l=[];try{for(var h=j(this.value),d=h.next();!d.done;d=h.next()){p=d.value;l.push(this.ch.choice(p,this.schema))}}catch(e){a={error:e}}finally{try{d&&!d.done&&(n=h.return)&&n.call(h)}finally{if(a)throw a.error}}i.forkJoin(l).subscribe((function(e){return r.choices.next(e)}))}else this.ch.choice(this.value,this.schema).subscribe((function(e){return r.choices.next([e])}));this.filteredOptions=this.control.valueChanges.pipe(s.startWith(this.value),s.debounceTime(this.ch.debounceTime()),s.switchMap((function(e){return r.change({target:{value:e}}),r.ch.filter(r.value,r.schema,e,r.choices)}))),this.edit=new _(this.schemaChange,this.name,this.schema,this.parentSchema,this.dialog)},e.prototype.focus=function(){var e=this;this.ch.load(this.value,this.schema).subscribe((function(t){e.choices.next(t)}))},e.prototype.url=function(e,t){var a=this;if(this.base=this.base?new URL(e,this.base).href:e,this.rootSchema.referenced&&this.rootSchema.referenced[this.base]){var n=this.rootSchema.referenced[this.base];return this.schema=t?q.jsonPointer(n,t):n,void this.setOrderedProperties()}this.http.get(this.base).subscribe((function(e){a.schema=t?q.jsonPointer(e,t):e,a.setOrderedProperties()}),(function(e){return console.log(e)})),this.schema={type:"string"},this.setOrderedProperties()},e.prototype.emit=function(e){var t=this;this.valueChange.emit(e),this.isRoot&&setTimeout((function(){t.errorChange.emit(t.recursiveError())}),10)},e.prototype.ngOnChanges=function(e){e.schema&&e.schema.previousValue&&(this.rootSchema=null,this.widgetHost.viewContainerRef&&this.widgetHost.viewContainerRef.clear(),this.ngOnInit()),e.switch&&!e.switch.isFirstChange()&&("custom"===this.getLayout()?this.loadComponent():this.widgetHost.viewContainerRef&&this.widgetHost.viewContainerRef.clear())},e.prototype.getLayout=function(){return this.schema.case&&this.schema.case.indexOf(this.switch)<0?"none":"custom"===this.schema.widget?"custom":this.hideUndefined&&void 0===this.value?"none":"object"===this.schema.type?this.schema.additionalProperties?"tab"===this.schema.layout?"additionalPropertiesTab":"additionalProperties":"object":"array"===this.schema.type?"tab"===this.schema.layout?"tab":"table"===this.schema.layout?"table":"select"===this.schema.layout?"array-select":"chips"===this.schema.layout?"chips":"array":this.schema.enum?"enum":"date"===this.schema.widget?"date":"upload"===this.schema.widget?"upload":"textarea"===this.schema.widget?"textarea":"boolean"===this.schema.type?"checkbox":this.schema.choicesUrl||this.schema.choices||this.schema.displayWith?"autocomplete":"single"},e.prototype.getInputType=function(e){return"number"===e.type||"integer"===e.type?"number":e.widget},e.prototype.onValueChange=function(e,t){var a,n;if(this.value||(this.value={}),this.value[e]=t,this.schema.computed)try{for(var r=j(Object.keys(this.schema.computed)),i=r.next();!i.done;i=r.next()){var o=i.value,l=this.schema.computed[o];this.value[o]=T.default(l).evaluate(this.value)}}catch(e){a={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}this.emit(this.value)},e.prototype.add=function(){this.value instanceof Array||(this.value=[]),"array"===this.schema.items.type?this.value.push([]):"object"===this.schema.items.type?this.value.push({}):this.value.push(null),this.emit(this.value)},e.prototype.addField=function(){this.value||(this.value={}),this.value[""]||(this.value[""]=null,this.emit(this.value))},e.prototype.remove=function(e){this.value.splice(e,1),this.emit(this.value)},e.prototype.removeField=function(e){delete this.value[e],this.emit(this.value)},e.prototype.fieldNameChange=function(e,t){this.value[t]=this.value[e],delete this.value[e],this.emit(this.value)},e.prototype.recursiveError=function(){var e,t,a=this.error();if(a)return a;if(this.child)return this.child.recursiveError();if(this.children)try{for(var n=j(this.children),r=n.next();!r.done;r=n.next()){var i=r.value.recursiveError();if(i)return i}}catch(t){e={error:t}}finally{try{r&&!r.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}return null},e.prototype.e=function(e){return this.schema.errorMessage?this.schema.errorMessage:e},e.prototype.error=function(){var e,t,a,n,r,i,o,l,s;if("custom"===this.schema.widget)return this.customError;if(this.schema.case&&this.schema.case.indexOf(this.switch)<0)return null;if(this.value){if(this.schema.maxItems&&!(this.value.length<=this.schema.maxItems))return this.e("Only "+this.schema.maxItems+" array entries allowed");if(this.schema.uniqueItems&&new Set(this.value).size!==this.value.length)return this.e("Array entries must be unique");if(this.schema.minItems&&!(this.value.length>=this.schema.minItems))return this.e("At least "+this.schema.minItems+" array entries required");if(this.schema.maxProperties&&!(Object.keys(this.value).length<=this.schema.maxProperties))return this.e("Only "+this.schema.maxProperties+" fields allowed");if(this.schema.propertyNames)try{for(var c=j(Object.keys(this.value)),u=c.next();!u.done;u=c.next()){var m=u.value;if(!(S=new RegExp(this.schema.propertyNames)).test(m))return this.e("illegal field name: "+m)}}catch(t){e={error:t}}finally{try{u&&!u.done&&(t=c.return)&&t.call(c)}finally{if(e)throw e.error}}if(this.schema.dependencies)try{for(var p=j(Object.keys(this.schema.dependencies)),h=p.next();!h.done;h=p.next()){var d=h.value;if(this.value[d])try{for(var f=(r=void 0,j(this.schema.dependencies[d])),v=f.next();!v.done;v=f.next()){var y=v.value;if(!this.value[y])return this.e(d+" depends on "+y)}}catch(e){r={error:e}}finally{try{v&&!v.done&&(i=f.return)&&i.call(f)}finally{if(r)throw r.error}}}}catch(e){a={error:e}}finally{try{h&&!h.done&&(n=p.return)&&n.call(p)}finally{if(a)throw a.error}}if(this.schema.minProperties&&!(Object.keys(this.value).length>=this.schema.minProperties))return this.e("At least "+this.schema.minProperties+" fields required");if(this.schema.maxLength&&!((""+this.value).length<=this.schema.maxLength))return this.e("Input is longer than "+this.schema.maxLength);if(this.schema.minLength&&!((""+this.value).length>=this.schema.minLength))return this.e("Input is shorter than "+this.schema.minLength);if(this.schema.multipleOf&&!Number.isInteger(Number(this.value)/this.schema.multipleOf))return this.e("Must be multiple of "+this.schema.multipleOf);if(this.schema.exclusiveMaximum&&!(Number(this.value)<this.schema.exclusiveMaximum))return this.e("Must be less than "+this.schema.exclusiveMaximum);if(this.schema.maximum&&!(Number(this.value)<=this.schema.maximum))return this.e("Must be less than or equal "+this.schema.maximum);if(this.schema.exclusiveMinimum&&!(Number(this.value)>this.schema.exclusiveMinimum))return this.e("Must greater than "+this.schema.exclusiveMinimum);if(this.schema.minimum&&!(Number(this.value)>=this.schema.minimum))return this.e("Must greater than or equal "+this.schema.minimum)}if(this.required&&(null==this.value||Object.is(this.value,NaN)))return this.e("required");if(this.schema.required)try{for(var g=j(this.schema.required),x=g.next();!x.done;x=g.next()){d=x.value;if(!this.value[d]&&!1!==this.value[d]&&0!==this.value[d]){var C=!1;if(this.schema.switch){var b=this.value[this.schema.switch];b&&(null===(s=this.schema.properties[d].case)||void 0===s?void 0:s.indexOf(b))<0&&(C=!0)}if(!C)return this.e(d+" is required")}}}catch(e){o={error:e}}finally{try{x&&!x.done&&(l=g.return)&&l.call(g)}finally{if(o)throw o.error}}if(this.schema.pattern){var S=new RegExp(this.schema.pattern);if(!this.value)return this.e("illegal string");if(!S.test(this.value))return this.e("illegal string")}if(this.schema.format&&this.service.formats[this.schema.format]){S=new RegExp(this.service.formats[this.schema.format]);if(!this.value)return this.e("illegal string");if(!S.test(this.value))return this.e("illegal string")}return null},e.prototype.getLabel=function(){return this.schema.title?this.schema.title:this.label?this.label:""},e.prototype.change=function(e){if(e instanceof a.MatSelectChange?e=e.value:e instanceof n.MatDatepickerInputEvent?e=this.serializeDate(e.value,this.schema.dateFormat,this.schema.type):e instanceof o.MatAutocompleteSelectedEvent?e=e.option.value:e instanceof r.MatCheckboxChange?e=e.checked:(e.target,e=e.target.value),""===e&&(e=null),null==e&&(this.value=null),"number"===this.schema.type)this.value=parseFloat(e);else if("integer"===this.schema.type)this.value=parseInt(e,10);else if("boolean"===this.schema.type)this.value="string"==typeof e?"true"===e||"false"!==e&&null:e;else if("string"===this.schema.type)this.value=e;else{if("array"!==this.schema.type)throw new Error("unknown type: "+this.schema.type);this.value=e}this.emit(this.value)},e.prototype.handleFileInput=function(e){var t=this;if(1048576<=e.target.files.item(0).size)console.log("The file size is limited to 1MB");else{var a=new FileReader;a.onload=function(){t.value=a.result,t.emit(t.value)},a.readAsDataURL(e.target.files.item(0))}},e.prototype.example=function(){return this.schema.examples&&this.schema.examples[0]?this.schema.examples[0]:this.schema.default?this.schema.default:null},e.prototype.loadComponent=function(){var e=this,t=this.componentFactoryResolver.resolveComponentFactory(this.service.registry[this.schema.widgetType]),a=this.widgetHost.viewContainerRef;a.clear();var n=a.createComponent(t);n.instance.label=this.label,n.instance.value=this.value,n.instance.schema=this.schema,n.instance.rootSchema=this.rootSchema,n.instance.rootValue=this.rootValue,n.instance.valueChange.subscribe((function(t){e.value=t,e.emit(e.value)})),n.instance.errorChange.subscribe((function(t){e.customError=t,e.errorChange.emit(t)}))},e.prototype.setAndEmit=function(e){this.value=e,this.emit(this.value)},e.prototype.setIndexAndEmit=function(e,t){this.value[e]=t,this.emit(this.value)},e.prototype.setIndexAndEmitTable=function(e,t,a){this.value[e][t]=a,this.emit(this.value)},e.prototype.showProperty=function(e){this.value||(this.value={}),void 0===this.value[e]?this.value[e]=null:null===this.value[e]&&(this.value[e]=void 0)},e.prototype.showPropertyList=function(){var e,t;if(this.schema.switch&&this.value){var a=this.value[this.schema.switch],n=[];try{for(var r=j(Object.entries(this.schema.properties)),i=r.next();!i.done;i=r.next()){var o=A(i.value,2),l=o[0],s=o[1];s.case?s.case.includes(a)&&n.push(l):n.push(l)}}catch(t){e={error:t}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}return n.sort()}return Object.keys(this.schema.properties).sort()},e.prototype.parseDate=function(e,t){if(!e&&0!==e)return e;if("number"==typeof e)return this.sameDate(new Date(e));if(!t)return e;var a=e.split(this.getDelimiter(t)),n=t.split(this.getDelimiter(t));return this.sameDate(new Date(a[n.indexOf("yyyy")],a[n.indexOf("MM")]-1,a[n.indexOf("dd")]))},e.prototype.sameDate=function(e){return this.date||(this.date=e),this.date.getTime()!==e.getTime()&&(this.date=e),this.date},e.prototype.serializeDate=function(e,t,a){if(null==e)return"";if("integer"===a||"number"===a)return""+e.valueOf();if(!t)return e.toISOString();var n=t.split(this.getDelimiter(t)),r=[null,null,null];return r[n.indexOf("yyyy")]=e.getFullYear(),r[n.indexOf("MM")]=e.getMonth()+1,r[n.indexOf("dd")]=e.getDate(),r[0]+this.getDelimiter(t)+r[1]+this.getDelimiter(t)+r[2]},e.prototype.getDelimiter=function(e){var t=e.match(/\W/g);if(!t[0])throw new Error("No delimiter found in date format: "+e);return t[0]},e.prototype.addChip=function(e){var t=e.input,a=e.value;(a||"").trim()&&(this.value||(this.value=[]),this.value.push(a.trim()),this.emit(this.value)),t&&(t.value="")},e.prototype.removeChip=function(e){var t=this.value.indexOf(e);t>=0&&(this.value.splice(t,1),0===this.value.length&&(this.value=null),this.emit(this.value))},e.prototype.dropChip=function(e){p.moveItemInArray(this.value,e.previousIndex,e.currentIndex),this.emit(this.value)},e}();Je.ɵfac=function(e){return new(e||Je)(t.ɵɵdirectiveInject(l.HttpClient),t.ɵɵdirectiveInject(t.ComponentFactoryResolver),t.ɵɵdirectiveInject(D),t.ɵɵdirectiveInject(m.MatDialog))},Je.ɵcmp=t.ɵɵdefineComponent({type:Je,selectors:[["lib-json-schema-form"]],viewQuery:function(e,a){if(1&e&&(t.ɵɵviewQuery($,1),t.ɵɵviewQuery(L,3),t.ɵɵviewQuery(N,1)),2&e){var n=void 0;t.ɵɵqueryRefresh(n=t.ɵɵloadQuery())&&(a.child=n.first),t.ɵɵqueryRefresh(n=t.ɵɵloadQuery())&&(a.widgetHost=n.first),t.ɵɵqueryRefresh(n=t.ɵɵloadQuery())&&(a.children=n)}},inputs:{name:"name",label:"label",value:"value",rootValue:"rootValue",schema:"schema",parentSchema:"parentSchema",rootSchema:"rootSchema",base:"base",switch:"switch",hideUndefined:"hideUndefined",inExpansion:"inExpansion",inArray:"inArray",required:"required"},outputs:{valueChange:"valueChange",errorChange:"errorChange",schemaChange:"schemaChange"},features:[t.ɵɵNgOnChangesFeature],decls:3,vars:2,consts:[[3,"ngStyle","ngClass","expanded",4,"ngIf"],[3,"matTooltip",4,"ngIf"],["libWidgetHost",""],[3,"ngStyle","ngClass","expanded"],[3,"label","name","value","switch","rootValue","rootSchema","schema","inExpansion","base","valueChange","schemaChange"],["child",""],[3,"matTooltip"],[4,"ngIf"],[3,"fxLayout","ngStyle","ngClass",4,"ngIf"],["animationDuration","0ms","style","max-width: 96vw",3,"ngStyle","ngClass",4,"ngIf"],[3,"ngStyle","ngClass",4,"ngIf"],["style","margin: 6px; margin-top: 12px;",3,"ngStyle","ngClass",4,"ngIf"],[2,"cursor","pointer",3,"matMenuTriggerFor","matTooltip"],["menu","matMenu"],["mat-menu-item","",3,"click"],["mat-menu-item","",3,"disabled","matMenuTriggerFor"],["mat-menu-item","",3,"disabled","click"],["madd","matMenu"],["mat-menu-item","",3,"click",4,"ngFor","ngForOf"],["madd2","matMenu"],[3,"fxLayout","ngStyle","ngClass"],[3,"fxLayout",4,"ngFor","ngForOf"],["style","margin-right: 20px;",4,"ngIf"],[3,"fxLayout"],["style","display: flex; margin: 2px",4,"ngFor","ngForOf"],[2,"display","flex","margin","2px"],[3,"name","label","value","switch","rootValue","rootSchema","schema","parentSchema","required","hideUndefined","base","valueChange","schemaChange"],["children",""],[2,"margin-right","20px"],["mat-icon-button","",3,"matMenuTriggerFor"],[4,"ngFor","ngForOf"],[3,"disabled","checked","change"],["style","display: flex; margin: 2px; position: relative",3,"mouseenter","mouseleave",4,"ngFor","ngForOf"],["mat-icon-button","",3,"matTooltip","click",4,"ngIf"],[2,"display","flex","margin","2px","position","relative",3,"mouseenter","mouseleave"],["autocomplete","off","matInput","",3,"disabled","value","change"],["inArray","true",3,"label","value","rootValue","rootSchema","schema","base","valueChange","schemaChange"],["mat-icon-button","","class","example-handle",3,"matTooltip","click",4,"ngIf"],["mat-icon-button","",1,"example-handle",3,"matTooltip","click"],["mat-icon-button","",3,"matTooltip","click"],["animationDuration","0ms",2,"max-width","96vw",3,"ngStyle","ngClass"],["style","margin: 2px; position: relative",4,"ngFor","ngForOf"],[2,"margin","2px","position","relative"],["mat-tab-label",""],["inArray","true",3,"value","rootValue","rootSchema","schema","base","valueChange","schemaChange"],["autocomplete","off","matInput","",3,"value","change"],[3,"ngStyle","ngClass"],["aria-label","Fruit selection","cdkDropList","","cdkDropListOrientation","horizontal",3,"cdkDropListDropped"],["chipList",""],["cdkDrag","",3,"removable","removed",4,"ngFor","ngForOf"],["autocomplete","off",3,"placeholder","matChipInputFor","matChipInputSeparatorKeyCodes","disabled","matChipInputTokenEnd"],["cdkDrag","",3,"removable","removed"],["matChipRemove",""],["style","margin: 2px; position: relative",3,"label",4,"ngFor","ngForOf"],[2,"margin","2px","position","relative",3,"label"],["summary","Properties table"],["scope","col",4,"ngFor","ngForOf"],["id","remove_row"],["scope","col"],[3,"value","rootValue","rootSchema","schema","base","valueChange","schemaChange"],[3,"value","disabled","selectionChange"],[3,"value",4,"ngFor","ngForOf"],[1,"error","mat-typography"],[3,"value"],[3,"matTooltip","ngStyle","ngClass"],["multiple","",3,"value","disabled","focus","selectionChange"],[3,"value","matTooltip",4,"ngFor","ngForOf"],[3,"value","matTooltip"],["autocomplete","off","matInput","",2,"width","100%",3,"value","matDatepicker","disabled","dateChange"],["matSuffix","",3,"for"],["picker",""],[2,"margin","6px","margin-top","12px",3,"ngStyle","ngClass"],[3,"checked","disabled","change"],[3,"value","disabled","focus","selectionChange"],["type","text","matInput","",3,"formControl","matAutocomplete","focus"],["auto","matAutocomplete"],["autocomplete","off","matInput","",3,"disabled","placeholder","type","value","input","focus",4,"ngIf"],["autocomplete","off","matInput","",3,"disabled","placeholder","type","value","change",4,"ngIf"],["autocomplete","off","matInput","",3,"disabled","placeholder","type","value","input","focus"],["autocomplete","off","matInput","",3,"disabled","placeholder","type","value","change"],["matInput","",3,"disabled","placeholder","value","ngStyle","ngClass","input",4,"ngIf"],["matInput","",3,"disabled","placeholder","value","ngStyle","ngClass","change",4,"ngIf"],["matInput","",3,"disabled","placeholder","value","ngStyle","ngClass","input"],["matInput","",3,"disabled","placeholder","value","ngStyle","ngClass","change"],["type","file","id","file",3,"ngStyle","ngClass","disabled","change"]],template:function(e,a){1&e&&(t.ɵɵtemplate(0,H,8,14,"mat-expansion-panel",0),t.ɵɵtemplate(1,We,17,17,"div",1),t.ɵɵtemplate(2,Be,0,0,"ng-template",2)),2&e&&(t.ɵɵproperty("ngIf",(!0===a.schema.expanded||!1===a.schema.expanded)&&!a.inExpansion),t.ɵɵadvance(1),t.ɵɵproperty("ngIf",null===a.schema.expanded||void 0===a.schema.expanded||a.inExpansion))},directives:[d.NgIf,L,f.MatExpansionPanel,v.DefaultStyleDirective,d.NgStyle,v.DefaultClassDirective,d.NgClass,f.MatExpansionPanelHeader,f.MatExpansionPanelTitle,f.MatExpansionPanelDescription,Je,y.MatTooltip,g.MatIcon,x.MatMenuTrigger,x.MatMenu,x.MatMenuItem,d.NgForOf,C.DefaultLayoutDirective,b.MatButton,r.MatCheckbox,S.MatFormField,S.MatLabel,w.MatInput,M.MatTabGroup,M.MatTab,M.MatTabLabel,E.MatChipList,p.CdkDropList,E.MatChipInput,E.MatChip,p.CdkDrag,E.MatChipRemove,a.MatSelect,I.MatOption,n.MatDatepickerInput,n.MatDatepickerToggle,S.MatSuffix,n.MatDatepicker,u.DefaultValueAccessor,o.MatAutocompleteTrigger,u.NgControlStatus,u.FormControlDirective,o.MatAutocomplete],pipes:[d.KeyValuePipe,d.AsyncPipe],styles:[".example-handle[_ngcontent-%COMP%]{position:absolute;z-index:9;top:0;right:0}.error[_ngcontent-%COMP%]{font-size:small;color:red;position:relative;top:-18px}"]}),("undefined"==typeof ngDevMode||ngDevMode)&&t.ɵsetClassMetadata(Je,[{type:t.Component,args:[{selector:"lib-json-schema-form",templateUrl:"./json-schema-form.component.html",styleUrls:["./json-schema-form.component.css"]}]}],(function(){return[{type:l.HttpClient},{type:t.ComponentFactoryResolver},{type:D},{type:m.MatDialog}]}),{children:[{type:t.ViewChildren,args:["children"]}],child:[{type:t.ViewChild,args:["child"]}],name:[{type:t.Input}],label:[{type:t.Input}],value:[{type:t.Input}],rootValue:[{type:t.Input}],valueChange:[{type:t.Output}],errorChange:[{type:t.Output}],schemaChange:[{type:t.Output}],schema:[{type:t.Input}],parentSchema:[{type:t.Input}],rootSchema:[{type:t.Input}],base:[{type:t.Input}],switch:[{type:t.Input}],hideUndefined:[{type:t.Input}],inExpansion:[{type:t.Input}],inArray:[{type:t.Input}],required:[{type:t.Input}],widgetHost:[{type:t.ViewChild,args:[L,{static:!0}]}]});var Qe=function(){};Qe.ɵfac=function(e){return new(e||Qe)},Qe.ɵmod=t.ɵɵdefineNgModule({type:Qe}),Qe.ɵinj=t.ɵɵdefineInjector({providers:[{provide:y.MAT_TOOLTIP_DEFAULT_OPTIONS,useValue:{touchGestures:"off"}}],imports:[[O.MatCardModule,V.FlexLayoutModule,g.MatIconModule,y.MatTooltipModule,k.MatTableModule,M.MatTabsModule,S.MatFormFieldModule,a.MatSelectModule,n.MatDatepickerModule,r.MatCheckboxModule,o.MatAutocompleteModule,l.HttpClientModule,d.CommonModule,w.MatInputModule,I.MatNativeDateModule,b.MatButtonModule,f.MatExpansionModule,x.MatMenuModule,u.ReactiveFormsModule,m.MatDialogModule,E.MatChipsModule,p.DragDropModule]]}),("undefined"==typeof ngJitMode||ngJitMode)&&t.ɵɵsetNgModuleScope(Qe,{declarations:[Je,R,L],imports:[O.MatCardModule,V.FlexLayoutModule,g.MatIconModule,y.MatTooltipModule,k.MatTableModule,M.MatTabsModule,S.MatFormFieldModule,a.MatSelectModule,n.MatDatepickerModule,r.MatCheckboxModule,o.MatAutocompleteModule,l.HttpClientModule,d.CommonModule,w.MatInputModule,I.MatNativeDateModule,b.MatButtonModule,f.MatExpansionModule,x.MatMenuModule,u.ReactiveFormsModule,m.MatDialogModule,E.MatChipsModule,p.DragDropModule],exports:[Je]}),("undefined"==typeof ngDevMode||ngDevMode)&&t.ɵsetClassMetadata(Qe,[{type:t.NgModule,args:[{declarations:[Je,R,L],imports:[O.MatCardModule,V.FlexLayoutModule,g.MatIconModule,y.MatTooltipModule,k.MatTableModule,M.MatTabsModule,S.MatFormFieldModule,a.MatSelectModule,n.MatDatepickerModule,r.MatCheckboxModule,o.MatAutocompleteModule,l.HttpClientModule,d.CommonModule,w.MatInputModule,I.MatNativeDateModule,b.MatButtonModule,f.MatExpansionModule,x.MatMenuModule,u.ReactiveFormsModule,m.MatDialogModule,E.MatChipsModule,p.DragDropModule],exports:[Je],providers:[{provide:y.MAT_TOOLTIP_DEFAULT_OPTIONS,useValue:{touchGestures:"off"}}]}]}],null,null),t.ɵɵsetComponentScope(R,[m.MatDialogContent,Je,m.MatDialogActions,b.MatButton,m.MatDialogClose],[]),e.DefaultChoiceHandler=P,e.JsonSchemaFormComponent=Je,e.JsonSchemaFormModule=Qe,e.JsonSchemaFormService=D,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=dashjoin-json-schema-form.umd.min.js.map